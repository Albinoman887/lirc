<P>
The receiver part for this driver is described <A HREF="http://people.inf.ethz.ch/mringwal/lirc/">here</A>.
</P>
<A NAME="audio_transmitter"></A><HR>
<H1 ALIGN=CENTER>Using the audio driver for transmitting.</H1>
<P>
Pros:
</P>
<UL>
<LI>Very simple circuit.</LI>
<LI>No need for a kernel module.</LI>
</UL>
<P>
Cons:
</P>
<UL>
<LI>Doesn't transmit very far without an amplifier (about 3 meters
when directly aiming).</LI>

<LI>A reasonably good sound-card is required (cheap cards might not
provide enough voltage, or might not be able to output a correct 18
kHz sine).</LI>

<LI>It takes some time to set up (50 ms or so) so when no clients are
connected to lircd the first transmission will have some higher
latency.
<P>
 A workaround for this is to keep irw running with a bash
script like this:
</P>
<code>
#!/bin/bash<br>
while [ true ]; do<br>
irw || true<br>
sleep 1<br>
done<br>
</code>
</LI>
</UL>


<H2 ALIGN=CENTER>How it works:</H2>
<br>
<P>
The audio driver can send IR signals using a (reasonably good)
sound-card and a very simple circuit. It does this by outputting a 18
kHz sine, which after rectification becomes a 36 kHz carrier wave.
The wave is inverted on the right channel, so the left and right
channels can be used to double the voltage.
</P>

<CENTER><img src="../images/audio_wave.png"></CENTER>

<P>
The top wave is how the wave looks when it comes out the sound-card,
the bottom wave is how it looks after rectification, as you can see
the frequency is doubled.
</P>
<P>
The rectification is done using the following circuit:
</P>

<CENTER><img src="../images/audio_transmitter.png"></CENTER>

<P>
LED1 and LED2 are 950 nm infra-red LEDs, R1 is a 0.25 watt resistor.
</P>
<P>
Because LEDs are diodes, they only conduct one way. Since the
sound-card outputs a wave that goes both positive and negative, two
LEDs are placed anti-parallel, that way infrared is emitted on both the
positive and negative cycles.
</P>
<P>
R1 is used to limit the current, this presents a load to the sound-card
that is roughly the same as a pair of 32 ohms headphones. To make the
transmission more powerful, you can try lowering the value of R1 (or
just short it out), but this might damage your sound-card, the LEDs, or
both. So try at your own risk!
</P>
<P>
Another way to make the transmission more powerful is to use a small
speaker amplifier (5 watts or less), in this case a 5 watt resistor
should be used for safety. The volume should be adjusted so that the
amplifier outputs its full voltage without clipping.
</P>
<H2 ALIGN=CENTER>Setting up:</H2>
<P>
Compile LIRC with the audio driver (not the IR diode or alsa ones) and
install it as usual. Connect the circuit to the sound-card and set the
volume to the maximum level. Start lircd, the -d flag can be used to
select the audio device and/or sample-rate, the syntax is
<code>api:device[@samplerate]</code> or <code>@samplerate</code>.
</P>
<P>
Examples:
</P>

<code>
lircd -d ALSA:default<br>
lircd -d ALSA:default@48000<br>
lircd -d @48000.<br>
</code>

<P>
Use irsend to test if it works.
</P>

<H2 ALIGN=CENTER>Known issues:</H2>

<P>
The audio driver uses PortAudio to interface with the sound-card, there
seems to be a bug in some later versions that makes portaudio hang
completely, lircd becomes unresponsive and you have to kill it with
<code>killall -9 lircd</code>. To get around this use the PortAudio
stable release from December 7, 2007.
</P>
